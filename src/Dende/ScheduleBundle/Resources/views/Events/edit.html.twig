{% extends "ScheduleBundle:Events:new.html.twig" %}

{% block form %}
<form id="newEventForm" action="{{ path("_events_edit", {occurence: occurence.id, event: event.id}) }}" class="form form-horizontal" method="POST">
    {% if form.editType is defined %}
        {{ form_row(form.editType) }}
    {% endif %}

    {{ form_row(form.activity) }}
    {{ form_row(form.newActivity) }}

    {% if form.eventType is defined %}
        {{ form_row(form.eventType) }}
    {% endif %}

    {{ form_row(form.startDate) }}
    {{ form_row(form.duration) }}

    {% if form.endDate is defined %}
        {{ form_row(form.endDate) }}
    {% endif %}

    {% if form.days is defined %}
        {{ form_row(form.days) }}
    {% endif %}

    {% if form.description is defined %}
        {{ form_row(form.description) }}
    {% endif %}
</form>
{% endblock form %}

{% block modal %}
<div class="hidden" id="ui-editEventData">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Edytuj wydarzenie</h3>
    </div>
    <div class="modal-footer">
        <div class="pull-right">
        {% if event.id %}
            <a href="#" class="btn" id="saveFormInModal">Usu≈Ñ</a>
        {% endif %}
            <a href="#" class="btn btn-primary" id="saveFormInModal">Zapisz</a>
        </div>
    </div>
</div>
{% endblock modal %}

{% block javascript %}
{% javascripts
    '@ScheduleBundle/Resources/public/coffee/schedule.newEvent.coffee'
    '@ScheduleBundle/Resources/public/coffee/schedule.editEvent.coffee'
    '@DefaultBundle/Resources/public/js/jquery.ui.widget.js'
    '@DefaultBundle/Resources/public/js/jquery.ui.spinner.js'
%}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
<script>
    $(function() {
        modal.setupFromNode("div#ui-editEventData");
        modal.setModalWindowClass("editEvent");

        window.editEventModal = new EditEvent();
    });
</script>
{% endblock javascript %}

