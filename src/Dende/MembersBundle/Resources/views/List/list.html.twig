{% extends "base.html.twig" %}

{% block body_class %}membersList{% endblock %}

{% block body %}

<div class="heading">

    <h3>Członkowie klubu</h3>                    

</div><!-- End .heading-->

<!-- Build page from here: Usual with <div class="row-fluid"></div> -->

<div class="container-fluid">
    <div class="row-fluid">
        <div class="icon span12">
            <a class="icon32 icomoon-icon-new green pull-right" id="createNewMember" href="{{path("_member_new")}}"></a>
            <a class="icomoon-icon-list green pull-left"  href="{{ path("_members_list") }}"></a>
            <a class="icomoon-icon-grid green pull-left" href="{{ path("_members_gallery") }}"></a>
        </div>
    </div>
</div>

<div class="row-fluid">

    <div class="span12">

        <div class="box gradient">

            <div class="title">
                <h4>
                    <span>{% block membersTitle %}Lista osób{% endblock membersTitle %}</span>
                </h4>
            </div>
            <div class="content noPad clearfix">
                {% block membersBody %}
                <table cellpadding="0" cellspacing="0" border="0" class="dynamicTable display table table-bordered" width="100%" id="membersList">
                    <thead>
                        <tr>
                            <th>Imię i nazwisko</th>
                            <th>Ost. wizyta</th>
                            <th>Karnet</th>
                            <th>Akcje</th>
                        </tr>
                    </thead>
                    <tbody>
        {% for member in members %}
                        <tr>
                            <td>{{ member.name }}</td>
                            <td>{{ member.birthdate|date("d.m.Y") }} <span class="label">BJJ dorośli</span></td>
                            
                            {# <td>{{ member.birthdate|date("d.m.Y") }} ({{ member.birthdate|age }})</td> #}
                            {# <td>{{ member.phone }}</td> #}
                            {# <td><a href="mailto:{{ member.email }}">{{ member.email }}</a></td> #}
                            <td class="voucherColumn">
                                <div class="progress progress-mini progress-danger left tip" oldtitle="87%" title="" data-hasqtip="true" aria-describedby="qtip-4">
                                    <div style="width: 87%;" class="bar"></div>
                                </div>
                                <span class="percent">3 dni</span>
                            </td>
                            <td>
                                <div class="btn-group">
                                    <a class="btn editMember" href="{{ path("_member_edit", {"id" : member.id}) }}"><span class="icomoon-icon-pencil-2"></span> Pokaż</a>
                                    <a class="btn" href="#"><span class="icomoon-icon-signup "></span> Wejście</a>
                                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="icon-align-left"></span> Sprzedaż<span class="caret"></span></a>
                                    <ul class="dropdown-menu pull-right">
                                      <li><a href="{{ path("_voucher_new", {"id" : member.id})}}" id="newVoucher"><span class="icomoon-icon-clock"></span> Karnet</a></li>
                                      <li><a href="#"><span class="icomoon-icon-cart-3"></span> Towar</a></li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
        {% endfor %}
                    </tbody>
                </table>
                {% endblock membersBody %}
            </div>

        </div><!-- End .box -->

    </div><!-- End .span12 -->

</div><!-- End .row-fluid -->

{% include 'MembersBundle::_memberModal.html.twig' %}
{% include 'MembersBundle::_voucherModal.html.twig' %}

{% endblock %}

{% block javascripts %}
{{ parent() }}
{% javascripts
    '@LayoutBundle/Resources/public/plugins/tables/dataTables/jquery.dataTables.js'
    '@LayoutBundle/Resources/public/plugins/forms/select2/select2.min.js'
    '@MembersBundle/Resources/public/coffee/membersList.coffee'
    '@DefaultBundle/Resources/public/js/jquery.ui.widget.js'
    '@DefaultBundle/Resources/public/js/jquery.iframe-transport.js'
    '@DefaultBundle/Resources/public/js/jquery.fileupload.js'
    '@DefaultBundle/Resources/public/js/jquery.ui.spinner.js'
 %}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% stylesheets filter='cssrewrite'
    'bundles/layout/plugins/tables/dataTables/jquery.dataTables.css'
    'bundles/layout/plugins/forms/select2/select2.css'
    'bundles/layout/plugins/forms/select2/select2-bootstrap.css'
    filter="cssrewrite"
%}
<link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% endblock %}


