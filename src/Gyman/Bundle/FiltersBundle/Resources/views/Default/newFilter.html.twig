{{ form_start(form,{
    action : path("_filter_new", {"listname": listname}),
    method : "POST",
    attr : {
        "class"         : "form form-horizontal",
        "id"            : "filterForm",
        "data-listname" : listname
    }
}) }}
    {% if form.vars.errors|length > 0 %}
        <div class="alert alert-error">
            <strong>Uwaga!</strong><a class="close" data-dismiss="alert" href="#">&times;</a>
            {{ form_errors(form) }}
        </div>
    {%endif %}

    {{ form_row(form.addFilter) }}

    {% for filterForm in form if filterForm.vars.name matches "@^sub_.*@ui"%}
        <div>
        {{ form_widget(filterForm) }}
        {{ form_errors(filterForm) }} {# todo: remove #}
        <button style="display: inline-block">x</button>
        </div>
    {% endfor %}

    {{ form_row(form.save) }}
    {{ form_row(form.name) }}
    {{ form_row(form.pinned) }}

    {{ form_rest(form) }}
{{ form_end(form) }}

{% block modal %}
    <div class="hidden" id="ui-editFilterData">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>{% block modalTitle %}Filtrowanie wynik√≥w{%endblock modalTitle%}</h3>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn btn-primary pull-right" id="saveFormInModal">Zastosuj</a>
        </div>
    </div>
{% endblock modal %}

{% block javascript %}
    {% if runSetupJavascript is defined and runSetupJavascript == true %}
    <script>
        $(function() {
            modal.setupFromNode("div#ui-editFilterData");
            modal.setModalWindowClass("addFilterModal");

            window.filter = new NewFilterModal();
        });
    </script>
    {% endif %}
{% endblock javascript %}
