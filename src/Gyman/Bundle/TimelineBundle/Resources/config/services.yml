services:
  gyman.timeline.spread:
    class: Gyman\Bundle\TimelineBundle\Timeline\Spread
    calls:
      - [setClubManager, [@doctrine.orm.tenant_entity_manager]]
      - [setDefaultManager, [@doctrine.orm.default_entity_manager]]
      - [setSession, [@session]]
    tags:
      - { name: spy_timeline.spread }

  gyman.timeline.events_handler:
    class: Gyman\Bundle\TimelineBundle\Timeline\EventsHandler
    arguments:
      - @security.context
      - @spy_timeline.action_manager.orm

  gyman.timeline.events_subscriber:
    class: Gyman\Bundle\TimelineBundle\Subscriber\EventSubscriber
    arguments:
      - @gyman.timeline.events_handler
    tags:
      - { name: kernel.event_subscriber }
